{"version":3,"sources":["Search.js","Body.js","auth.js","Login.js","Header.js","App.js","index.js"],"names":["Search","headers","document","cookie","split","console","log","useState","options","setOptions","className","Autocomplete","getOptionLabel","option","artist","title","renderOption","Fragment","src","img","width","height","explicit","style","fontSize","fontWeight","color","fullWidth","autoHighlight","autoSelect","onInputChange","event","value","reason","join","fetch","then","response","json","result","tracks","items","map","track","name","artists","album","images","slice","url","catch","error","filterOptions","state","getOptionSelected","renderInput","params","TextField","label","variant","Body","props","isLoaded","token","seed_track","min_pop","handleChange","bind","handleSubmit","target","this","setState","preventDefault","message","onSubmit","type","onChange","min_popularity","React","Component","authEndpoint","accessToken","window","location","hash","Login","Button","href","Header","AppBar","position","background","Toolbar","Typography","App","history","pushState","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.006b416a.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport { Autocomplete } from '@material-ui/lab'\nimport { TextField } from '@material-ui/core'\n\nfunction Search() {\n\n  const headers = {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'Authorization': `Bearer ${document.cookie.split('=')[1]}`\n  }\n\n  console.log(document.cookie.split('=')[1])\n\n  const [options, setOptions] = useState([])\n\n  function updateOptions(event, value, reason) {\n    console.log(`https://api.spotify.com/v1/search?q=${value.split(' ').join('%20')}&type=track&limit=5`)\n    if (value && value!='') {\n      fetch(`https://api.spotify.com/v1/search?q=${value.split(' ').join('%20')}&type=track&limit=5`, { headers })\n        .then(response => response.json())\n        .then(\n          (result) => {\n            console.log(result.tracks.items.map(track => ({title:track.name, artist:track.artists[0].name, explicit:track.explicit})))\n            setOptions(result.tracks.items.map(track => ({\n              title:track.name, \n              artist:track.artists[0].name, \n              img:track.album.images.slice(-1)[0].url,\n              explicit:track.explicit\n            })))\n          }\n        )\n        .catch(error => {\n          console.error('Error:', error);\n        });\n    }\n  }\n\n  return (\n    <div className=\"SearchBar\">\n      <br/>\n      <Autocomplete\n        options={options}\n        getOptionLabel={(option) => `${option.artist} - ${option.title}`}\n        renderOption={(option) => (\n          <React.Fragment>\n            <img src={option.img} width={32} height={32}></img>\n            &nbsp;\n            {option.artist} - {option.title}\n            &nbsp;\n            {option.explicit && <span style={{fontSize:'.75em',fontWeight:'bold',color:'red'}}>E</span>}\n          </React.Fragment>\n        )}\n        fullWidth\n        autoHighlight\n        autoSelect\n        onInputChange={updateOptions}\n        filterOptions={(options, state) => options}\n        getOptionSelected={(option, value) => option }\n        renderInput={(params) => <TextField {...params} label=\"Search for Tracks\" variant=\"outlined\"/>}\n      />\n    </div>\n  )\n}\n\nexport default Search","import React from 'react'\nimport Search from './Search'\n\nclass Body extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      token: document.cookie.split('=')[1],\n      seed_track: '',\n      min_pop: ''\n\n    };\n    \n    //Bind\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    const value = event.target.value;\n    const name = event.target.name;\n    this.setState({[name]: value});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    const headers = {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n      'Authorization': `Bearer ${document.cookie.split('=')[1]}`\n    }\n\n    console.log(this.state.seed_track);\n\n    if (this.state.seed_track && this.state.min_pop) {\n      fetch(`https://api.spotify.com/v1/recommendations?market=US&seed_tracks=${this.state.seed_track}&min_popularity=${this.state.min_pop}`, { headers })\n        .then(response => response.json())\n        .then(\n          (result) => {\n            this.setState({\n              isLoaded: true,\n              items: result\n\n            });\n          },\n          // Note: it's important to handle errors here\n          // instead of a catch() block so that we don't swallow\n          // exceptions from actual bugs in components.\n          (error) => {\n            this.setState({\n              isLoaded: true,\n              error\n            });\n          }\n        )\n      }\n  }\n\n  render() {\n    const { error, isLoaded, items } = this.state;\n\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return (\n        <div>\n          <Search />\n        </div>\n      )\n    } else {\n      return (\n        <>\n          <form onSubmit={this.handleSubmit}> \n            <label>\n              Seed Track ID:\n            <input \n              name=\"seed_track\" \n              type=\"text\" \n              value={this.state.seed_track}\n              onChange={this.handleChange}  />\n            </label>\n            <br/>\n            <label>\n              Min Popularity (0-100):\n            <input \n              name=\"min_pop\" \n              type=\"text\" \n              value={this.state.min_popularity}\n              onChange={this.handleChange}  />\n            </label>\n            <br/>\n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n          <br/>\n\n          //Print reponse from API call\n          <ul>\n            {items.tracks.map(track => (\n              <li>\n                {track.artists[0].name} - {track.name}\n              </li>\n            ))}\n          </ul>\n        </>\n      );\n    }\n  }\n}\n\nexport default Body;","const clientId = '3cf6931c4f974651b57c25157fe28427';\nconst redirectUri = 'https://tommygeiger.com/spotify-react-app/';\nconst scopes = [\n    'user-read-private',\n    'user-read-email'\n];\n\nexport const authEndpoint = `https://accounts.spotify.com/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join('%20')}&response_type=token&show_dialog=false`;\nexport const accessToken = window.location.hash.split('&')[0].split('=')[1];\n","import { authEndpoint } from './auth'\nimport Button from '@material-ui/core/Button'\n\nfunction Login() {\n  return( \n    <Button variant=\"contained\" href={authEndpoint}>\n      Connect to Spotify\n    </Button>\n  )\n}\n\nexport default Login","import { AppBar, Toolbar, Typography, } from '@material-ui/core'\nimport Login from './Login'\nimport './App.css'\n\nfunction Header() {\n\n  const style = {\n    background : '#2ab859'\n  };\n\n  return (\n    <AppBar position=\"static\" style={style}>\n      <Toolbar>\n        <Typography variant=\"h6\">\n          spotify-react-app\n        </Typography>\n        { !document.cookie &&\n          <div className=\"Right\">\n            <Login />\n          </div>\n        }\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default Header;","import Body from './Body'\nimport Header from './Header'\nimport { accessToken } from './auth'\nimport './App.css'\n\nfunction App() {\n\n  //Get access token and save to cookie\n  if (accessToken) {\n    document.cookie = `access-token=${accessToken}; max-age=3600; path=/`;\n    window.history.pushState(null, null, ' ');\n  }\n  console.log(document.cookie.split('=')[1]);\n \n  return (\n    <div className=\"App\">\n      <Header />\n      { document.cookie &&\n        <Body />\n      }\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App /> \n  </React.StrictMode>,\n  document.getElementById('root')\n)"],"sourceRoot":""}
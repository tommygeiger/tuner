(this["webpackJsonpspotify-react-app"]=this["webpackJsonpspotify-react-app"]||[]).push([[0],{40:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),c=n(11),r=n.n(c),s=n(28),o=n(41),l=n(42),u=n(23),p=n(52),h=n(51),j=n(34),d=n(50),m=n(114),b=n(113),f="https://accounts.spotify.com/authorize?client_id=".concat("3cf6931c4f974651b57c25157fe28427","&redirect_uri=").concat("https://tommygeiger.com/spotify-react-app/","&scope=").concat(["user-read-private","user-read-email"].join("%20"),"&response_type=token&show_dialog=false"),O=window.location.hash.split("&")[0].split("=")[1],g={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(window.localStorage.getItem("token"))},x=n(5);var v=function(){var t=Object(a.useState)([]),e=Object(d.a)(t,2),n=e[0],c=e[1];return Object(x.jsxs)("div",{className:"SearchBar",children:[Object(x.jsx)("br",{}),Object(x.jsx)(m.a,{options:n,getOptionLabel:function(t){return"".concat(t.artist," - ").concat(t.title)},renderOption:function(t){return Object(x.jsxs)(i.a.Fragment,{children:[Object(x.jsx)("img",{src:t.img}),t.artist," - ",t.title]})},fullWidth:!0,autoHighlight:!0,autoSelect:!0,onInputChange:function(t,e,n){console.log("https://api.spotify.com/v1/search?q=".concat(e.split(" ").join("%20"),"&type=track&limit=5")),e&&""!=e&&fetch("https://api.spotify.com/v1/search?q=".concat(e.split(" ").join("%20"),"&type=track&limit=5"),{headers:g}).then((function(t){return t.json()})).then((function(t){console.log(t.tracks.items.map((function(t){return{title:t.name,artist:t.artists[0].name,img:t.album.images.slice(-1)[0].url}}))),c(t.tracks.items.map((function(t){return{title:t.name,artist:t.artists[0].name,img:t.album.images.slice(-1)[0].url}})))})).catch((function(t){console.error("Error:",t)}))},filterOptions:function(t,e){return t},getOptionSelected:function(t,e){return t.title},renderInput:function(t){return Object(x.jsx)(b.a,Object(j.a)(Object(j.a)({},t),{},{label:"Search for Tracks",variant:"outlined"}))}})]})},k=function(t){Object(p.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={error:null,isLoaded:!1,items:[],token:window.localStorage.getItem("token"),seed_track:"",min_pop:""},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"handleChange",value:function(t){var e=t.target.value,n=t.target.name;this.setState(Object(s.a)({},n,e))}},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var n={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.state.token)};console.log(this.state.seed_track),this.state.seed_track&&this.state.min_pop&&fetch("https://api.spotify.com/v1/recommendations?market=US&seed_tracks=".concat(this.state.seed_track,"&min_popularity=").concat(this.state.min_pop),{headers:n}).then((function(t){return t.json()})).then((function(t){e.setState({isLoaded:!0,items:t})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var t=this.state,e=t.error,n=t.isLoaded,a=t.items;return e?Object(x.jsxs)("div",{children:["Error: ",e.message]}):n?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(x.jsxs)("label",{children:["Seed Track ID:",Object(x.jsx)("input",{name:"seed_track",type:"text",value:this.state.seed_track,onChange:this.handleChange})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("label",{children:["Min Popularity (0-100):",Object(x.jsx)("input",{name:"min_pop",type:"text",value:this.state.min_popularity,onChange:this.handleChange})]}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"submit",value:"Submit"})]}),Object(x.jsx)("br",{}),"//Print reponse from API call",Object(x.jsx)("ul",{children:a.tracks.map((function(t){return Object(x.jsxs)("li",{children:[t.artists[0].name," - ",t.name]})}))})]}):Object(x.jsx)("div",{children:Object(x.jsx)(v,{})})}}]),n}(i.a.Component),y=n(110),S=n(111),w=n(112),_=n(109);var C=function(){return Object(x.jsx)(_.a,{variant:"contained",href:f,children:"Connect to Spotify"})};n(40);var I=function(){return Object(x.jsx)(y.a,{position:"static",style:{background:"#2ab859"},children:Object(x.jsxs)(S.a,{children:[Object(x.jsx)(w.a,{variant:"h6",children:"spotify-react-app"}),!window.localStorage.getItem("token")&&Object(x.jsx)("div",{className:"Right",children:Object(x.jsx)(C,{})})]})})};var A=function(){return O&&(window.localStorage.setItem("token",O),window.history.pushState(null,null," ")),console.log(window.localStorage.getItem("token")),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(I,{}),window.localStorage.getItem("token")&&Object(x.jsx)(k,{})]})};n(69);r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.6839bb90.chunk.js.map
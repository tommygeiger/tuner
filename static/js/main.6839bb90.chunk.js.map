{"version":3,"sources":["auth.js","Search.js","Body.js","Login.js","Header.js","App.js","index.js"],"names":["authEndpoint","join","accessToken","window","location","hash","split","headers","localStorage","getItem","Search","useState","options","setOptions","className","Autocomplete","getOptionLabel","option","artist","title","renderOption","Fragment","src","img","fullWidth","autoHighlight","autoSelect","onInputChange","event","value","reason","console","log","fetch","then","response","json","result","tracks","items","map","track","name","artists","album","images","slice","url","catch","error","filterOptions","state","getOptionSelected","renderInput","params","TextField","label","variant","Body","props","isLoaded","token","seed_track","min_pop","handleChange","bind","handleSubmit","target","this","setState","preventDefault","message","onSubmit","type","onChange","min_popularity","React","Component","Login","Button","href","Header","AppBar","position","style","background","Toolbar","Typography","App","setItem","history","pushState","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6839bb90.chunk.js","sourcesContent":["const clientId = '3cf6931c4f974651b57c25157fe28427';\nconst redirectUri = 'https://tommygeiger.com/spotify-react-app/';\nconst scopes = [\n    'user-read-private',\n    'user-read-email'\n];\n\nexport const authEndpoint = `https://accounts.spotify.com/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join('%20')}&response_type=token&show_dialog=false`;\nexport const accessToken = window.location.hash.split('&')[0].split('=')[1];\nexport const headers = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'Authorization': `Bearer ${window.localStorage.getItem('token')}`\n}\n","import React, { useState } from 'react'\nimport { Autocomplete } from '@material-ui/lab'\nimport { TextField } from '@material-ui/core'\nimport { headers } from './auth'\n\nfunction Search() {\n\n  // const [query, setQuery] = useState(0)\n\n  const [options, setOptions] = useState([])\n\n  function updateOptions(event, value, reason) {\n    console.log(`https://api.spotify.com/v1/search?q=${value.split(' ').join('%20')}&type=track&limit=5`)\n    if (value && value!='') {\n      fetch(`https://api.spotify.com/v1/search?q=${value.split(' ').join('%20')}&type=track&limit=5`, { headers })\n        .then(response => response.json())\n        .then(\n          (result) => {\n            console.log(result.tracks.items.map(track => ({title:track.name, artist:track.artists[0].name, img:track.album.images.slice(-1)[0].url})))\n            setOptions(result.tracks.items.map(track => ({title:track.name, artist:track.artists[0].name, img:track.album.images.slice(-1)[0].url})))\n          }\n        )\n        .catch(error => {\n          console.error('Error:', error);\n        });\n    }\n  }\n\n  return (\n    <div className=\"SearchBar\">\n      <br/>\n      <Autocomplete\n        options={options}\n        getOptionLabel={(option) => `${option.artist} - ${option.title}`}\n        renderOption={(option) => (\n          <React.Fragment>\n            <img src={option.img}></img>\n            {option.artist} - {option.title}\n          </React.Fragment>\n        )}\n        fullWidth\n        autoHighlight\n        autoSelect\n        onInputChange={updateOptions}\n        filterOptions={(options, state) => options}\n        getOptionSelected={(option, value) => option.title }\n        renderInput={(params) => <TextField {...params} label=\"Search for Tracks\" variant=\"outlined\"/>}\n      />\n    </div>\n  )\n}\n\nexport default Search","import React from 'react'\nimport Search from './Search'\n\nclass Body extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      items: [],\n      token: window.localStorage.getItem('token'),\n      seed_track: '',\n      min_pop: ''\n\n    };\n    \n    //Bind\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    const value = event.target.value;\n    const name = event.target.name;\n    this.setState({[name]: value});\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    const headers = {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json',\n      'Authorization': `Bearer ${this.state.token}`\n    }\n\n    console.log(this.state.seed_track);\n\n    if (this.state.seed_track && this.state.min_pop) {\n      fetch(`https://api.spotify.com/v1/recommendations?market=US&seed_tracks=${this.state.seed_track}&min_popularity=${this.state.min_pop}`, { headers })\n        .then(response => response.json())\n        .then(\n          (result) => {\n            this.setState({\n              isLoaded: true,\n              items: result\n\n            });\n          },\n          // Note: it's important to handle errors here\n          // instead of a catch() block so that we don't swallow\n          // exceptions from actual bugs in components.\n          (error) => {\n            this.setState({\n              isLoaded: true,\n              error\n            });\n          }\n        )\n      }\n  }\n\n  render() {\n    const { error, isLoaded, items } = this.state;\n\n    if (error) {\n      return <div>Error: {error.message}</div>;\n    } else if (!isLoaded) {\n      return (\n        <div>\n          <Search />\n        </div>\n      )\n    } else {\n      return (\n        <>\n          <form onSubmit={this.handleSubmit}> \n            <label>\n              Seed Track ID:\n            <input \n              name=\"seed_track\" \n              type=\"text\" \n              value={this.state.seed_track}\n              onChange={this.handleChange}  />\n            </label>\n            <br/>\n            <label>\n              Min Popularity (0-100):\n            <input \n              name=\"min_pop\" \n              type=\"text\" \n              value={this.state.min_popularity}\n              onChange={this.handleChange}  />\n            </label>\n            <br/>\n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n          <br/>\n\n          //Print reponse from API call\n          <ul>\n            {items.tracks.map(track => (\n              <li>\n                {track.artists[0].name} - {track.name}\n              </li>\n            ))}\n          </ul>\n        </>\n      );\n    }\n  }\n}\n\nexport default Body;","import { authEndpoint } from './auth'\nimport Button from '@material-ui/core/Button'\n\nfunction Login() {\n  return( \n    <Button variant=\"contained\" href={authEndpoint}>\n      Connect to Spotify\n    </Button>\n  )\n}\n\nexport default Login","import { AppBar, Toolbar, Typography, } from '@material-ui/core'\nimport Login from './Login'\nimport './App.css'\n\nfunction Header() {\n\n  const style = {\n    background : '#2ab859'\n  };\n\n  return (\n    <AppBar position=\"static\" style={style}>\n      <Toolbar>\n        <Typography variant=\"h6\">\n          spotify-react-app\n        </Typography>\n        { !window.localStorage.getItem('token') &&\n          <div className=\"Right\">\n            <Login />\n          </div>\n        }\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nexport default Header;","import Body from './Body'\nimport Header from './Header'\nimport { accessToken } from './auth'\nimport './App.css'\n\nfunction App() {\n\n  //Get access token and save to localstorage\n  if (accessToken) { \n    window.localStorage.setItem('token', accessToken);\n    window.history.pushState(null, null, ' ');\n  }\n  console.log(window.localStorage.getItem('token'));\n \n  return (\n    <div className=\"App\">\n      <Header />\n      { window.localStorage.getItem('token') &&\n        <Body />\n      }\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App /> \n  </React.StrictMode>,\n  document.getElementById('root')\n)"],"sourceRoot":""}